{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://edugpt.example.com/schemas/syllabus.schema.json",
  "title": "Syllabus",
  "description": "A personalized learning syllabus generated by EduGPT system",
  "type": "object",
  "required": ["meta", "topic", "duration_weeks", "weekly_time_hours", "modules"],
  "additionalProperties": false,
  "$defs": {
    "moduleId": {
      "type": "string",
      "pattern": "^m[0-9]{2}-[a-z0-9-]+$",
      "description": "Unique module identifier in slug format (e.g., m01-foundations)"
    },
    "license": {
      "type": "string",
      "pattern": "^(CC-BY|CC-BY-SA|CC-BY-NC|CC-BY-ND|CC0|MIT|Apache|GPL|BSD|Proprietary|Public Domain).*$",
      "description": "Resource license identifier"
    }
  },
  "properties": {
    "meta": {
      "type": "object",
      "description": "Metadata about the syllabus",
      "required": ["schema_version", "created_at"],
      "additionalProperties": false,
      "properties": {
        "schema_version": {
          "type": "integer",
          "description": "Schema version for forward compatibility",
          "const": 1
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when syllabus was created (ISO 8601)"
        },
        "generated_by": {
          "type": "string",
          "description": "Model or agent that generated this syllabus",
          "default": "EduGPT-v1"
        }
      }
    },
    "topic": {
      "type": "string",
      "description": "Main topic or subject of the course",
      "minLength": 1,
      "maxLength": 200
    },
    "duration_weeks": {
      "type": "integer",
      "description": "Total duration of the course in weeks (whole number)",
      "minimum": 1,
      "maximum": 52
    },
    "weekly_time_hours": {
      "type": "number",
      "description": "Expected study time per week in hours",
      "minimum": 0.5,
      "maximum": 40,
      "multipleOf": 0.5
    },
    "learner_profile": {
      "type": "object",
      "description": "Learner characteristics that influenced syllabus design",
      "additionalProperties": false,
      "properties": {
        "goals": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 5,
            "maxLength": 500
          },
          "description": "Learner's stated learning goals",
          "minItems": 1,
          "maxItems": 10
        },
        "prior_knowledge": {
          "type": "string",
          "description": "Learner's background knowledge level",
          "enum": ["beginner", "intermediate", "advanced"]
        },
        "preferences": {
          "type": "object",
          "description": "Learning preferences",
          "additionalProperties": false,
          "properties": {
            "learning_style": {
              "type": "string",
              "enum": ["visual", "auditory", "reading", "kinesthetic", "mixed"]
            },
            "pacing": {
              "type": "string",
              "enum": ["slow", "moderate", "fast"]
            }
          }
        }
      }
    },
    "modules": {
      "type": "array",
      "description": "Ordered list of learning modules",
      "minItems": 1,
      "maxItems": 20,
      "items": {
        "type": "object",
        "required": ["id", "title", "outcomes", "topics", "estimated_hours"],
        "additionalProperties": false,
        "properties": {
          "id": {
            "$ref": "#/$defs/moduleId"
          },
          "title": {
            "type": "string",
            "description": "Module title",
            "minLength": 1,
            "maxLength": 200
          },
          "description": {
            "type": "string",
            "description": "Brief overview of the module",
            "maxLength": 1000
          },
          "outcomes": {
            "type": "array",
            "description": "Learning outcomes (what learner will be able to do)",
            "minItems": 1,
            "maxItems": 10,
            "items": {
              "type": "string",
              "minLength": 10,
              "maxLength": 500
            }
          },
          "topics": {
            "type": "array",
            "description": "Specific topics covered in this module",
            "minItems": 1,
            "maxItems": 20,
            "items": {
              "type": "string",
              "minLength": 2,
              "maxLength": 200
            }
          },
          "prerequisites": {
            "type": "array",
            "description": "Module IDs that must be completed first (optional)",
            "items": {
              "$ref": "#/$defs/moduleId"
            },
            "maxItems": 5
          },
          "estimated_hours": {
            "type": "number",
            "description": "Estimated time to complete module in hours",
            "minimum": 0.5,
            "maximum": 100,
            "multipleOf": 0.5
          },
          "resources": {
            "type": "array",
            "description": "Recommended learning resources from agent negotiation",
            "maxItems": 15,
            "items": {
              "type": "object",
              "required": ["type", "title"],
              "additionalProperties": false,
              "properties": {
                "type": {
                  "type": "string",
                  "enum": ["textbook", "book", "article", "video", "exercise", "project", "website", "course", "tutorial", "paper", "other"],
                  "description": "Type of educational resource"
                },
                "title": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 300,
                  "description": "Title or name of the resource"
                },
                "url": {
                  "type": "string",
                  "format": "uri",
                  "description": "URL to access the resource (optional for physical books)"
                },
                "description": {
                  "type": "string",
                  "maxLength": 500,
                  "description": "Brief description of the resource and its relevance"
                },
                "author": {
                  "type": "string",
                  "maxLength": 200,
                  "description": "Author or creator of the resource"
                },
                "source": {
                  "type": "string",
                  "maxLength": 200,
                  "description": "Source platform or publisher (e.g., Khan Academy, MIT OCW, Wikipedia)"
                },
                "license": {
                  "$ref": "#/$defs/license"
                }
              }
            }
          },
          "difficulty": {
            "type": "string",
            "description": "Difficulty level of this module",
            "enum": ["easy", "medium", "hard", "very_hard"],
            "default": "medium"
          },
          "assessment": {
            "type": "object",
            "description": "Assessment configuration for this module",
            "additionalProperties": false,
            "properties": {
              "type": {
                "type": "string",
                "enum": ["quiz", "project", "essay", "mixed"],
                "default": "quiz"
              },
              "passing_threshold": {
                "type": "number",
                "description": "Percentage required to pass (0-100)",
                "minimum": 0,
                "maximum": 100,
                "default": 70
              },
              "adaptive": {
                "type": "boolean",
                "description": "Whether assessment adapts to learner performance",
                "default": true
              }
            }
          }
        }
      }
    },
    "total_estimated_hours": {
      "type": "number",
      "description": "Sum of all module estimated_hours (computed field)",
      "minimum": 0,
      "readOnly": true
    },
    "workload_feasible": {
      "type": "boolean",
      "description": "Whether workload fits within weekly time budget (computed field)",
      "readOnly": true
    }
  }
}
